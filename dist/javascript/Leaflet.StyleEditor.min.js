var leafletstyleeditor=function(e){var t={};function i(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(r,o,function(t){return e[t]}.bind(null,o));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=7)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleEditorClass=void 0;class r extends L.Class{constructor(e){super(),this.styleEditor=e,this.map=e.map,this.util=e.util}}t.StyleEditorClass=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStyleEditorOptions=t.DefaultStyleEditorClassOptions=t.DefaultStyleEditorControlOptions=void 0;const r=i(11);Object.defineProperty(t,"DefaultStyleEditorControlOptions",{enumerable:!0,get:function(){return r.DefaultStyleEditorControlOptions}});const o=i(12);Object.defineProperty(t,"DefaultStyleEditorClassOptions",{enumerable:!0,get:function(){return o.DefaultStyleEditorClassOptions}});const s=i(18);Object.defineProperty(t,"DefaultStyleEditorOptions",{enumerable:!0,get:function(){return s.DefaultStyleEditorOptions}})},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StyleEditorImpl=void 0;const o=i(9),s=i(10),l=i(1),n=r(i(7));class a extends n.default.Class{constructor(e,t){super(),this.map=e,this.options=Object.assign(Object.assign({},l.DefaultStyleEditorOptions),t),this.util=new s.Util(this),this.createUi()}createUi(){const e=this.editorUI=n.default.DomUtil.create("div","leaflet-styleeditor",this.map.getContainer()),t=n.default.DomUtil.create("div","leaflet-styleeditor-header",e),i=(this.interiorEditorUI=n.default.DomUtil.create("div","leaflet-styleeditor-interior",e),n.default.DomUtil.create("button","leaflet-styleeditor-button styleeditor-hideBtn",t));i.title=this.options.strings.hide;const r=this.tooltipUI=n.default.DomUtil.create("div","leaflet-styleeditor-tooltip-wrapper",this.map.getContainer());n.default.DomUtil.create("div","leaflet-styleeditor-tooltip",r).innerHTML=this.options.strings.tooltip,n.default.DomEvent.disableScrollPropagation(e),n.default.DomEvent.disableScrollPropagation(i),n.default.DomEvent.disableClickPropagation(e),n.default.DomEvent.disableClickPropagation(i),n.default.DomEvent.on(i,"click",this.onNext,this),this.addEventListeners(this.map),new o.StyleForm(this)}addEventListeners(e){this.options.events.forEach(t=>e.on(t,this.onEvent))}onEvent(e){}onNext(e){this.hideEditor(),this.showTooltip(),e.stopPropagation()}removeIndicators(){const e=this.map.getPanes().markerPane.children;for(let t=0;t<e.length;t++){const i=e[t];n.default.DomUtil.removeClass(i,"leaflet-styleeditor-marker-selected")}}addClickEvents(){this.map.eachLayer(this.addClickEvent,this)}addClickEvent(e){this.layerIsIgnored(e)||(this.options.useGrouping&&e instanceof n.default.LayerGroup||e instanceof n.default.Marker||n.default.Path,e.on("click",this.showEditor,this))}removeClickEvents(){this.map.eachLayer(this.removeClickEvent,this)}removeClickEvent(e){e.off("click",this.showEditor,this)}layerIsIgnored(e){return void 0!==e&&this.options.ignoreLayerTypes.some(t=>e.styleEditor&&e.styleEditor.type.toUpperCase()===t.toUpperCase())}hideEditor(){n.default.DomUtil.removeClass(this.editorUI,"editor-enabled"),this.removeIndicators(),this.fireEvent("hidden")}showEditor(e){e&&(this.currentElement=e),n.default.DomUtil.addClass(this.editorUI,"editor-enabled"),this.fireEvent("visible")}showTooltip(){n.default.DomUtil.removeClass(this.tooltipUI,"leaflet-styleeditor-hidden")}hideTooltip(){n.default.DomUtil.addClass(this.tooltipUI,"leaflet-styleeditor-hidden")}fireEvent(e,t){}enable(){this.addClickEvents(),this.showTooltip(),this.showEditor()}disable(){this.removeClickEvents(),this.hideTooltip(),this.hideEditor()}getCurrentLayers(){return this.currentElement.target instanceof n.default.LayerGroup?this.currentElement.target.getLayers():[this.currentElement.target]}getCurrentMarker(){return this.getCurrentLayers().filter(e=>{n.default.Marker})}}t.StyleEditorImpl=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkerForm=t.Form=void 0;const r=i(13);Object.defineProperty(t,"Form",{enumerable:!0,get:function(){return r.Form}});const o=i(4);Object.defineProperty(t,"MarkerForm",{enumerable:!0,get:function(){return o.MarkerForm}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkerForm=void 0;const r=i(3),o=i(14),s={color:o.ColorElement};class l extends r.Form{constructor(e,t){super(e,"marker",t,s)}}t.MarkerForm=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormElement=void 0;const r=i(0);class o extends r.StyleEditorClass{constructor(e,t,i,r){super(t.styleEditor),this.styleOption=e,this.title=r||e.charAt(0).toUpperCase()+e.slice(1),this.parentForm=t,this.create(i)}create(e){this.uiElement=L.DomUtil.create("div","leaflet-styleeditor-uiElement",e),this.createTitle(),this.createContent()}createTitle(){L.DomUtil.create("label","leaflet-styleeditor-label",this.uiElement).innerHTML=this.title+":"}createContent(){}show(e){this.style(e),this.showForm()}showForm(){this.util.showElement(this.uiElement)}hide(){this.util.hideElement(this.uiElement)}style(e){}lostFocus(){}setStyle(e){const t=this.parentForm.styleEditor.getCurrentLayers();for(let i=0;i<t.length;i++){let r=t[i];if(r instanceof L.Marker)new this.styleEditor.options.markerType(this.styleEditor).setStyle(this.styleOption,e);else if(r instanceof L.Path){let t={};t[this.styleOption]=e,r.setStyle(t),r.options[this.styleOption]=e}this.util.fireChangeEvent(r)}this.parentForm.style()}}t.FormElement=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMarker=t.Marker=void 0;const r=i(16);Object.defineProperty(t,"Marker",{enumerable:!0,get:function(){return r.Marker}});const o=i(17);Object.defineProperty(t,"DefaultMarker",{enumerable:!0,get:function(){return o.DefaultMarker}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(8);const r=i(2),o=i(19);i(20),L.StyleEditor=r.StyleEditorImpl,L.styleEditor=function(e,t){return new r.StyleEditorImpl(e,t)},L.Control.StyleEditor=o.StyleEditorControl,L.control.styleEditor=function(e){return new o.StyleEditorControl(e)},t.default=L},function(e,t){e.exports=void 0},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleForm=void 0;const r=i(0);class o extends r.StyleEditorClass{constructor(e){super(e),this.markerForm=this.createMarkerForm(),this.geometryForm=this.createGeometryForm(),this.addDOMEvents()}addDOMEvents(){L.DomEvent.addListener(this.map,"click",this.lostFocus,this),L.DomEvent.addListener(this.styleEditor.editorUI,"click",this.lostFocus,this)}clearForm(){this.markerForm.hide(),this.geometryForm.hide()}createMarkerForm(){let e=L.DomUtil.create("div","leaflet-styleeditor-interior-marker",this.styleEditor.interiorEditorUI);return new this.styleEditor.options.markerForm(this.styleEditor,e)}createGeometryForm(){let e=L.DomUtil.create("div","leaflet-styleeditor-interior-geometry",this.styleEditor.interiorEditorUI);return new this.styleEditor.options.geometryForm(this.styleEditor,e)}showMarkerForm(){this.clearForm(),this.markerForm.show()}showGeometryForm(){this.clearForm(),this.geometryForm.show()}fireChangeEvent(e){this.util.fireChangeEvent(e)}lostFocus(e){let t=e.target;for(let e=0;e<10&&t;e++){if(t.className&&L.DomUtil.hasClass(t,"leaflet-styleeditor-interior"))return;t=t.parentNode}this.markerForm.lostFocus(),this.geometryForm.lostFocus()}}t.StyleForm=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.UtilOptions=void 0;t.UtilOptions=class{};t.Util=class{constructor(e){this.styleEditor=e,this.map=e.map,this.options=e.options}fireEvent(e,t){this.map.fireEvent(this.options.styleEditorEventPrefix+e,t)}fireChangeEvent(e){this.fireEvent("changed",e)}hideElement(e){e&&L.DomUtil.addClass(e,"leaflet-styleeditor-hidden")}rgbToHex(e,t=!1){if(e||0!==(e=this.options.defaultColor).indexOf("#")&&(e="#"+e),0===e.indexOf("#"))return t&&e.replace("#",""),e;if(e.indexOf("(")<0)return"#"+e;let i=e.substring(4).replace(")","").split(","),r=this._componentToHex(parseInt(i[0],10))+this._componentToHex(parseInt(i[1],10))+this._componentToHex(parseInt(i[2],10));return t?r:"#"+r}getStyle(e){return null}setStyle(e,t,i){if(e instanceof L.Marker)new this.styleEditor.options.markerType(this.styleEditor).setStyle(t,i);else{let r={};r[t]=i,e.setStyle(r)}this.fireChangeEvent(e)}showElement(e){e&&L.DomUtil.removeClass(e,"leaflet-styleeditor-hidden")}_componentToHex(e){let t=e.toString(16);return 1===t.length?"0"+t:t}getMarkersForColor(e){e=this.rgbToHex(e);let t=new this.styleEditor.options.markerType(this.styleEditor).markers,i=this.styleEditor.options.markers;if(Array.isArray(t)||(t=Object.keys(t).includes(e)?t[e]:t.default),null!==i){if(!Array.isArray(i)){let r=Object.keys(i);i=r.includes(e)?i[e]:r.includes("default")?i.default:t}return t.filter(e=>i.includes(e))}return t}getDefaultMarkerForColor(e){e=this.rgbToHex(e);let t=this.getMarkersForColor(e),i=[],r=this.styleEditor.options.defaultMarkerIcon;return null!==r&&("string"==typeof r&&i.push(r),Object.keys(r).includes(e)&&i.push(r[e])),r=new this.styleEditor.options.markerType(this.styleEditor).defaultMarkerIcon,void 0!==r&&("string"==typeof r&&i.push(r),Object.keys(r).includes(e)&&i.push(r[e])),i.filter(e=>t.includes(e)),i.length>0?i[0]:t[0]}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStyleEditorControlOptions=void 0,t.DefaultStyleEditorControlOptions={position:"topleft",strings:{title:"Style Editor",cancel:"cancel",cancelTitle:"cancel"}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStyleEditorClassOptions=void 0;const r=i(3),o=i(6);t.DefaultStyleEditorClassOptions={position:"topleft",colorRamp:["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#ecf0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],defaultColor:null,markerType:o.DefaultMarker,markers:null,defaultMarkerIcon:null,defaultMarkerColor:null,markerForm:r.MarkerForm,geometryForm:r.MarkerForm,ignoreLayerTypes:[],forms:{},events:[],openOnLeafletDraw:!0,openOnLeafletEditable:!0,showTooltip:!0,strings:{tooltip:"Click on the element you want to style",hide:"Hide Style Editor"},useGrouping:!0,styleEditorEventPrefix:"styleeditor:"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;const r=i(0);class o extends r.StyleEditorClass{constructor(e,t,i,r){super(e),this.initializedElements={},this.formOptionsKey=t,this.parentUiElement=i,this.formElements=r,this.create()}create(){for(let e in this.formElements){const t=this.getFormElementClass(e);void 0!==t&&(this.initializedElements[e]=new t(this,this.parentUiElement))}}hide(){this.hideFormElements(),this.hideForm()}hideFormElements(){for(let e in this.initializedElements)this.initializedElements[e].hide()}hideForm(){this.util.hideElement(this.parentUiElement)}show(e){this.preShow(),this.showFormElements(),this.showForm(),this.style(e)}preShow(){}showFormElements(){for(let e in this.initializedElements)this.showFormElement(this.initializedElements[e])}showForm(){this.util.showElement(this.parentUiElement)}style(e){for(let t in this.initializedElements)this.initializedElements[t].style(e)}lostFocus(){for(let e in this.initializedElements)this.initializedElements[e].lostFocus()}showFormElement(e){this.showFormElementForStyleOption(e.styleOption)?e.show():e.hide()}getFormElementClass(e){if(Object.keys(this.formElements).indexOf(e)>=0){let t=this.formElements[e];if(t){if("boolean"==typeof t)return this.getFormElementStandardClass(e);"formElement"in t&&"boolean"in t&&(t=t.formElement)}return this.getFormElementStandardClass(e)}}showFormElementForStyleOption(e){return!1}getFormElementStandardClass(e){return this.formElements[e]}}t.Form=o},function(e,t,i){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormElement=t.ColorElement=void 0;const o=r(i(15));t.ColorElement=o.default;const s=i(5);Object.defineProperty(t,"FormElement",{enumerable:!0,get:function(){return s.FormElement}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i(5),o=i(4);class s extends r.FormElement{constructor(e,t){super("color",e,t,"color")}createContent(){this.colorPickerDiv=L.DomUtil.create("div","leaflet-styleeditor-colorpicker",this.uiElement),this.getColorRamp().forEach(this.setSelectCallback,this)}getColorRamp(){if(this.parentForm instanceof o.MarkerForm){const e=new this.styleEditor.options.markerType(this.styleEditor);if(e.colorRamp)return e.colorRamp}return this.styleEditor.options.colorRamp}setSelectCallback(e){let t=L.DomUtil.create("div","leaflet-styleeditor-color",this.colorPickerDiv);t.style.backgroundColor=e,L.DomEvent.addListener(t,"click",this.selectColor,this)}selectColor(e){e.stopPropagation(),this.setStyle(this.util.rgbToHex(e.target.style.backgroundColor))}}t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const r=i(0);class o extends r.StyleEditorClass{constructor(e,t){super(e),this.size={small:[20,50],medium:[30,70],large:[35,90]},""===t||t.startsWith("leaflet-styleeditor-select-image")||(this.selectIconClass="leaflet-styleeditor-select-image-"+t)}setNewMarker(e){let t=this.createMarkerIcon(e);this.styleEditor.getCurrentLayers().forEach(e=>{e instanceof L.Marker&&(e.setIcon(t),e instanceof L.LayerGroup?e.eachLayer((function(e){e instanceof L.Marker&&L.DomUtil.addClass(e.getElement(),"leaflet-styleeditor-marker-selected")})):L.DomUtil.addClass(e.getElement(),"leaflet-styleeditor-marker-selected"))})}setStyle(e,t){"icon"!==e&&(e="icon"+e.charAt(0).toUpperCase()+e.slice(1)),this.setNewMarker(this.getNewMarkerOptions(e,t))}createSelectHTML(e,t,i){}getIconOptions(){let e={};const t=this.styleEditor.getCurrentLayers().find(e=>e instanceof L.Marker);return t&&(e=t.options.icon.options),Object.keys(e).length>0||(e.iconColor=this._getDefaultMarkerColor(),e.iconSize=this.size.small,e.icon=this.util.getDefaultMarkerForColor(e.iconColor),e=this._ensureMarkerIcon(e)),e}getNewMarkerOptions(e,t){let i=this.getIconOptions();return i[e]=t,i}_ensureMarkerIcon(e){return this.util.getMarkersForColor(e.iconColor).includes(e.icon)||(e.icon=this.util.getDefaultMarkerForColor(e.iconColor)),e}_getDefaultMarkerColor(){let e=this.colorRamp,t=this.styleEditor.options.colorRamp,i=[];null!=e?(i=e.filter(e=>t.includes(e)),0===i.length&&(i=e)):i=t;let r=this.styleEditor.options.defaultMarkerColor;return null===r||i.includes(r)||(r=null),null===r&&(r=this.styleEditor.options.defaultColor,null===r||i.includes(r)||(r=null),null===r&&(r=i[0])),this.util.rgbToHex(r)}sizeToName(e){let t=Object.keys(this.size);if("string"==typeof e){"s"===e?e="small":"m"===e?e="medium":"l"===e&&(e="large");for(let i=0;i<t.length;i++)if(this.size[t[i]]===e)return t[i]}let i=Object.values(this.size);for(let r=0;r<i.length;r++)if(JSON.stringify(e)===JSON.stringify(i[r]))return t[r];return t[0]}sizeToPixel(e){return e=this.sizeToName(e),this.size[e]}}t.Marker=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMarker=void 0;const r=i(6);class o extends r.Marker{constructor(e){super(e,"defaultmarker"),this.markers=["circle-stroked","circle","square-stroked","square","triangle-stroked","triangle","star-stroked","star","cross","marker-stroked","marker","religious-jewish","religious-christian","religious-muslim","cemetery","rocket","airport","heliport","rail","rail-metro","rail-light","bus","fuel","parking","parking-garage","airfield","roadblock","ferry","harbor","bicycle","park","park2","museum","lodging","monument","zoo","garden","campsite","theatre","art-gallery","pitch","soccer","america-football","tennis","basketball","baseball","golf","swimming","cricket","skiing","school","college","library","post","fire-station","town-hall","police","prison","embassy","beer","restaurant","cafe","shop","fast-food","bar","bank","grocery","cinema","pharmacy","hospital","danger","industrial","warehouse","commercial","building","place-of-worship","alcohol-shop","logging","oil-well","slaughterhouse","dam","water","wetland","disability","telephone","emergency-telephone","toilets","waste-basket","music","land-use","city","town","village","farm","bakery","dog-park","lighthouse","clothing-store","polling-place","playground","entrance","heart","london-underground","minefield","rail-underground","rail-above","camera","laundry","car","suitcase","hairdresser","chemist","mobilephone","scooter"]}createMarkerIcon(e){let t=e.iconSize;return new L.Icon({iconUrl:this._getMarkerUrlForStyle(e),iconSize:e.iconSize,iconColor:e.iconColor,icon:e.icon,className:this.selectIconClass,iconAnchor:[t[0]/2,t[1]/2],popupAnchor:[0,-t[1]/2]})}createSelectHTML(e,t,i){let r={};r.iconSize=this.size.small,r.icon=i,r.iconColor=t.iconColor,e.innerHTML=this.createMarkerIcon(r).createIcon().outerHTML}_getMarkerUrlForStyle(e){return this._getMarkerUrl(e.iconSize,e.iconColor,e.icon)}_getMarkerUrl(e,t,i){let r="https://api.tiles.mapbox.com/v3/marker/pin-"+(e=this.sizeToName(e)[0]);return i&&(r+="-"+i),r+"+"+(t=0===t.indexOf("#")?t.replace("#",""):this.util.rgbToHex(t,!0))+".png"}}t.DefaultMarker=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultStyleEditorOptions=void 0;const r=i(1);t.DefaultStyleEditorOptions=Object.assign(Object.assign(Object.assign({},r.DefaultStyleEditorClassOptions),r.DefaultStyleEditorControlOptions),{strings:{title:r.DefaultStyleEditorControlOptions.strings.title,cancel:r.DefaultStyleEditorControlOptions.strings.cancel,cancelTitle:r.DefaultStyleEditorControlOptions.strings.cancelTitle,tooltip:r.DefaultStyleEditorClassOptions.strings.tooltip,hide:r.DefaultStyleEditorClassOptions.strings.hide}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StyleEditorControl=void 0;const r=i(2),o=i(1);class s extends L.Control{constructor(e,t,i){super(),this.isEnabled=!1,void 0===i?(this.options=Object.assign(Object.assign({},o.DefaultStyleEditorControlOptions),e),this.styleEditor=t):(this.options=Object.assign(Object.assign({},o.DefaultStyleEditorControlOptions),i),this.styleEditorClassOptions=Object.assign(Object.assign({},o.DefaultStyleEditorClassOptions),i))}onAdd(e){return void 0===this.styleEditor&&(this.styleEditor=new r.StyleEditorImpl(e,this.styleEditorClassOptions)),this.styleEditor.disable(),this.createUI()}createUI(){const e=L.DomUtil.create("div","leaflet-control-styleeditor leaflet-control leaflet-bar");L.DomUtil.create("a","leaflet-control-styleeditor-interior",e).title=this.options.strings.title;const t=this.cancelUI=L.DomUtil.create("div","leaflet-control-styleeditor-cancel leaflet-styleeditor-hidden",e);return t.innerHTML=this.options.strings.cancel,t.title=this.options.strings.cancelTitle,L.DomEvent.disableScrollPropagation(e),L.DomEvent.disableScrollPropagation(t),L.DomEvent.disableClickPropagation(e),L.DomEvent.disableClickPropagation(t),L.DomEvent.on(e,"click",this.toggle,this),e}toggle(){this.isEnabled?this.disable():this.enable()}enable(){this.isEnabled=!0,this.showCancelButton(),this.styleEditor.enable()}disable(){this.isEnabled&&(this.isEnabled=!1,this.hideCancelButton(),this.styleEditor.disable())}showCancelButton(){L.DomUtil.removeClass(this.cancelUI,"leaflet-styleeditor-hidden")}hideCancelButton(){L.DomUtil.addClass(this.cancelUI,"leaflet-styleeditor-hidden")}}t.StyleEditorControl=s},function(e,t,i){}]);
//# sourceMappingURL=Leaflet.StyleEditor.min.js.map