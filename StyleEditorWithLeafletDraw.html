<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>

    <script src="node_modules/leaflet/dist/leaflet.js"></script>
    <link rel="stylesheet" href="node_modules/leaflet/dist/leaflet.css"/>

    <script src="node_modules/leaflet-draw/dist/leaflet.draw.js"></script>
    <link rel="stylesheet" href="node_modules/leaflet-draw/dist/leaflet.draw.css"/>

    <script src="node_modules/leaflet-styleeditor/dist/javascript/Leaflet.StyleEditor.min.js"></script>
    <link rel="stylesheet" href="node_modules/leaflet-styleeditor/dist/css/Leaflet.StyleEditor.min.css"/>


    <style type="text/css">

        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

    </style>

</head>

<body>
<div id="map"></div>
<script>
  const map = L.map('map').setView([20, -40], 3)
  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map)

  //Initialize the StyleEditor
  const styleEditor = L.control.styleEditor({
    position: 'topleft',
    useGrouping: false
  })
  map.addControl(styleEditor)

  //Leaflet.draw

  const drawnItems = new L.FeatureGroup()
  map.addLayer(drawnItems)

  const drawControl = new L.Control.Draw({
    draw: {
      position: 'topleft',
      polygon: {
        title: 'Draw a sexy polygon!',
        allowIntersection: false,
        drawError: {
          color: '#b00b00',
          timeout: 1000
        },
        shapeOptions: {
          color: '#bada55'
        },
        showArea: true
      },
      polyline: {
        metric: false
      },
      circle: {
        shapeOptions: {
          color: '#662d91'
        }
      },
      marker: {
        icon: styleEditor.getDefaultIcon()
      }
    },
    edit: {
      featureGroup: drawnItems
    }
  })
  map.addControl(drawControl)

  map.on('draw:created', function (e) {
    const type = e.layerType,
      layer = e.layer

    if (type === 'marker') {
      layer.bindPopup('A popup!')
    }

    drawnItems.addLayer(layer)
  })
</script>
</body>

</html>
